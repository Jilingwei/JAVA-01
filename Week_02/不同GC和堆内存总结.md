# Serial GC

![image-20210123210719494](https://tva1.sinaimg.cn/large/008eGmZEgy1gmxxmv1ci0j31kk09s76n.jpg)

​	串行收集器使用单个线程来执行所有垃圾收集工作，这使之相对高效，因为没有线程之间通信开销。它最适合单处理器计算机，因为它不能利用多处理器，尽管它在多处理器上对于数据集较小（最大约100 MB）的应用很有用。某些硬件和操作系统配置上默认情况下选择了串行收集器，也可以通过选项-XX：+ UseSerialGC显式启用它。

1. Serial GC和应用线程的执行是串行的，在执行Serial GC的时候，会执行SWT(stop-the-world)，Serial GC使用的是分代算法，在**新生代**上，Serial使用**复制算法**进行收集，在老年代上，Serial使用**标记-压缩算法**进行收集。
2. Serial GC 对于运行在客户端模式下的袭击来说是一个很好的选择 —《深入理解Java虚拟机》

# **Parallel GC**



![image-20210123213818727](https://tva1.sinaimg.cn/large/008eGmZEgy1gmxyj3uf5cj31lu09oaca.jpg)

Parallel GC 可以说是一个多线程版本的Serial GC，多个线程主要是为了加速垃圾收集。可以通过启动选项 `-XX:+UseConcMarkSweepGC`.启动。

Parellel Scavenge收集器也是一个青年代，采用复制算法的收集器。和CMS收集器尽可能缩短垃圾收集时SWT(stop-the-world)停顿时间不同，Parellel Scavenge收集器的主要关注点在于达到一个可控制的吞吐量(Throughtput)。

低停顿时间的关注点在于以良好的响应速度和低延迟来提升用户体验，适合需要和用户有较多交互的场景；而高吞吐量的关注点在于可以高效率地利用CPU时间以尽快完成运算任务，此场景主要适合较少用户交互多后台计算任务的场景。

# CMS GC

![image-20210123214259790](https://tva1.sinaimg.cn/large/008eGmZEgy1gmxynz0sz1j31li0bowhm.jpg)

CMS是一种以获得最短回收停顿时间为目标的收集器。它的收集过程分为4步：

- **初始标记**
- **并发标记**
- **重新标记**
- **并发清除**

其中初始标记和重新标记两个步骤仍需要Stop The World间隔。初始标记仅仅是标记一下GC Roots能直接关联到的对象，速度很快。并发标记阶段就是进行GC Roots追踪的过程，而重新标记则是为了修正并发标记期间由于用户程序继续执行可能产生变动的那部分对象的标记记录，此阶段会比初始标记长一些，但远小于并发标记的时间。

整个阶段并发标记和并发清除是耗时最长的两个阶段。但是由于CMS收集器是并发执行的，故可以和用户线程一起工作，所以从整体上CMS收集器的工作过程是和用户线程并发执行的。

优点：

- **GC收集间隔时间短，多线程并发。**

缺点：

- **1.并发时对CPU资源占用多，不适合CPU核心数较少的情况。**
- **2.且由于采用标记清除算法，所以会产生内存碎片。**
- **3.无法处理浮动垃圾**

# G1

![image-20210123214725649](https://tva1.sinaimg.cn/large/008eGmZEgy1gmxysl7h27j31lw0k4aey.jpg)

G1收集器(Garbage-First (G1))是收集器技术发展最前沿的成果之一，HotSpot团队赋予它的使命是可以替换掉CMS的收集器，与其他GC收集器相比，G1收集器拥有以下特点：

**并行与并发：**G1能充分利用多CPU下的优势来缩短Stop The World的时间，同时在其他部分收集器需要停止Java线程来执行GC动作时，G1收集器仍然可以通过并发来让Java线程同步执行。

**分代收集**：与其他收集器一样，分代的概念在G1中任然被保留。可以不需要配合其他的垃圾收集器，就独立管理整个Java堆内存的所有分代区域，且采用不同的方式来获得更好的垃圾收集效果。

**空间整合**：G1从整体来看，使用的是标记-压缩算法实现的，从局部两个Region来看，采用的是复制算法实现的，对内存空间的利用非常高效，不会像CMS一样产生内存碎片。

**可以预测的停顿**：除了追求低停顿以外，G1的停顿时间可以被指定在一个时间范围内。
如果不计算维护Remenbered Set的操作，G1收集器的工作阶段大致区分如下：

- 初始标记
- 并发标记
- 最终标记
- 筛选回收

